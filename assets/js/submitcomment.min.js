const issueUrl="https://api.github.com/repos/cphanvan/cphanvan/issues",xhr=new XMLHttpRequest;let isRecaptchaValidated=!1;function onRecaptchaSuccess(){isRecaptchaValidated=!0,form.querySelector("#comment-confirmation").classList.add("hidden"),form.querySelector("#comment-confirmation").classList.remove("notice--danger")}function onRecaptchaError(){isRecaptchaValidated=!1}async function onSubmit(e){if(!isRecaptchaValidated){e.querySelector(".js-notice-text").innerHTML="Veuillez svp valider le reCAPTCHA.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--danger");return}xhr.open("POST","https://api.github.com/repos/cphanvan/cphanvan/issues",!0),xhr.onload=t=>{4===xhr.readyState&&(201===xhr.status?(e.reset(),e.querySelector(".js-notice-text").innerHTML="Merci pour votre commentaire, il sera visible sur le site une fois approuv\xe9.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--success")):(e.reset(),e.querySelector(".js-notice-text").innerHTML="Une erreur impr\xe9vue s'est produite lors de la soumission de votre commentaire. Je vous invite \xe0 r\xe9essayer ult\xe9rieurement, ou \xe0 me contacter directement si le probl\xe8me persiste.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--danger")))},xhr.onerror=t=>{e.reset(),e.querySelector(".js-notice-text").innerHTML="Une erreur impr\xe9vue s'est produite lors de la soumission de votre commentaire. Je vous invite \xe0 r\xe9essayer ult\xe9rieurement, ou \xe0 me contacter directement si le probl\xe8me persiste.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--danger")};let t=e.querySelector("#comment-form-message").value,r=e.querySelector("#comment-form-name").value,o=e.querySelector("#comment-form-email").value,i=e.querySelector("#comment-form-url").value,n=new Date,s=e.querySelector("#pageIdForComment").innerText;xhr.setRequestHeader("Accept","application/vnd.github+json"),xhr.setRequestHeader("Authorization","Bearer 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"),xhr.setRequestHeader("X-GitHub-Api-Version","2022-11-28"),xhr.send(JSON.stringify({title:"custom-static-comment => nouveau commentaire soumis",body:JSON.stringify({commentPageId:s,id:n.valueOf()+"-"+r,message:t,name:r,email:o,url:i,date:n.toLocaleString("fr-FR")})}))}