const issueUrl="https://api.github.com/repos/cphanvan/cphanvan/issues",xhr=new XMLHttpRequest,auth="Bearer "+atob("Z2l0aHViX3BhdF8xMUFTM1IyT0kwc0N1WVRQOUQydzVNX05VUTBDcFhIc291OWtXY3JtYXZ6REc1U0xabnBuMEU1cXZnMFg0MlZlSWRIQVUySU9aSjFnSGZ1VGlV");let isRecaptchaValidated=!1;function onRecaptchaSuccess(){isRecaptchaValidated=!0,form.querySelector("#comment-confirmation").classList.add("hidden"),form.querySelector("#comment-confirmation").classList.remove("notice--danger")}function onRecaptchaError(){isRecaptchaValidated=!1}async function onSubmit(e){if(!isRecaptchaValidated){e.querySelector(".js-notice-text").innerHTML="Veuillez svp valider le reCAPTCHA.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--danger");return}xhr.open("POST","https://api.github.com/repos/cphanvan/cphanvan/issues",!0),xhr.onload=t=>{4===xhr.readyState&&(201===xhr.status?(e.reset(),e.querySelector(".js-notice-text").innerHTML="Merci pour votre commentaire, il sera visible sur le site une fois approuv\xe9.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--success")):(e.reset(),e.querySelector(".js-notice-text").innerHTML="Une erreur impr\xe9vue s'est produite lors de la soumission de votre commentaire. Je vous invite \xe0 r\xe9essayer ult\xe9rieurement, ou \xe0 me contacter directement si le probl\xe8me persiste.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--danger")))},xhr.onerror=t=>{e.reset(),e.querySelector(".js-notice-text").innerHTML="Une erreur impr\xe9vue s'est produite lors de la soumission de votre commentaire. Je vous invite \xe0 r\xe9essayer ult\xe9rieurement, ou \xe0 me contacter directement si le probl\xe8me persiste.",e.querySelector("#comment-confirmation").classList.remove("hidden"),e.querySelector("#comment-confirmation").classList.add("notice--danger")};let t=e.querySelector("#comment-form-message").value,r=e.querySelector("#comment-form-name").value,o=e.querySelector("#comment-form-email").value,n=e.querySelector("#comment-form-url").value,i=new Date,c=e.querySelector("#pageIdForComment").innerText;xhr.setRequestHeader("Accept","application/vnd.github+json"),xhr.setRequestHeader("Authorization",auth),xhr.setRequestHeader("X-GitHub-Api-Version","2022-11-28"),xhr.send(JSON.stringify({title:"custom-static-comment => nouveau commentaire soumis",body:JSON.stringify({commentPageId:c,id:i.valueOf()+"-"+r,message:t,name:r,email:o,url:n,date:i.toLocaleString("fr-FR")})}))}